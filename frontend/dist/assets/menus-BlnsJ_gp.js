import{b as I,k as L,l as O}from"./system-DoQ-IRuu.js";import{_ as T,p as h,c as G,b as l,w as t,r as a,h as _,q as H,o as f,j as J,i as g,m as K,l as Q,f as i,t as W,a as C,n as X,E as U,g as Y}from"./index-BxG9Idjn.js";const Z={class:"menus-page"},ee={class:"card-header"},le={__name:"menus",setup(te){const c=_(!1),v=_(!1),u=_(!1),y=_([]),V=_(null),n=Y({parent_id:0,title:"",path:"",component:"",icon:"",sort:0,menu_type:2,permission:""}),D={title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},b=async()=>{c.value=!0;try{y.value=await I()}finally{c.value=!1}},M=()=>{Object.assign(n,{parent_id:0,title:"",path:"",component:"",icon:"",sort:0,menu_type:2,permission:""})},w=r=>{M(),n.parent_id=r,u.value=!0},B=async()=>{if(await V.value.validate().catch(()=>!1)){v.value=!0;try{await O(n),U.success("创建成功"),u.value=!1,b()}finally{v.value=!1}}},E=r=>{X.confirm("确定要删除该菜单吗？","提示",{type:"warning"}).then(async()=>{await L(r.id),U.success("删除成功"),b()}).catch(()=>{})};return h(()=>{b()}),(r,e)=>{const N=a("Plus"),k=a("el-icon"),p=a("el-button"),s=a("el-table-column"),$=a("el-tag"),P=a("el-table"),R=a("el-card"),m=a("el-input"),d=a("el-form-item"),x=a("el-radio"),j=a("el-radio-group"),q=a("el-input-number"),F=a("el-form"),S=a("el-dialog"),z=H("loading");return f(),G("div",Z,[l(R,null,{header:t(()=>[C("div",ee,[e[11]||(e[11]=C("span",null,"菜单管理",-1)),l(p,{type:"primary",onClick:e[0]||(e[0]=o=>w(0))},{default:t(()=>[l(k,null,{default:t(()=>[l(N)]),_:1}),e[10]||(e[10]=i(" 新增菜单 ",-1))]),_:1})])]),default:t(()=>[J((f(),g(P,{data:y.value,"row-key":"id",border:"","default-expand-all":""},{default:t(()=>[l(s,{prop:"title",label:"菜单名称","min-width":"150"}),l(s,{prop:"icon",label:"图标",width:"80",align:"center"},{default:t(({row:o})=>[o.icon?(f(),g(k,{key:0},{default:t(()=>[(f(),g(K(o.icon)))]),_:2},1024)):Q("",!0)]),_:1}),l(s,{prop:"path",label:"路由路径","min-width":"150"}),l(s,{prop:"component",label:"组件路径","min-width":"150"}),l(s,{prop:"permission",label:"权限标识","min-width":"150"}),l(s,{prop:"sort",label:"排序",width:"80",align:"center"}),l(s,{prop:"menu_type",label:"类型",width:"80",align:"center"},{default:t(({row:o})=>[l($,{type:o.menu_type===1?"warning":"success",size:"small"},{default:t(()=>[i(W(o.menu_type===1?"目录":"菜单"),1)]),_:2},1032,["type"])]),_:1}),l(s,{label:"操作",width:"180",fixed:"right"},{default:t(({row:o})=>[l(p,{type:"primary",link:"",onClick:A=>w(o.id)},{default:t(()=>[...e[12]||(e[12]=[i("新增子菜单",-1)])]),_:1},8,["onClick"]),l(p,{type:"danger",link:"",onClick:A=>E(o)},{default:t(()=>[...e[13]||(e[13]=[i("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[z,c.value]])]),_:1}),l(S,{modelValue:u.value,"onUpdate:modelValue":e[9]||(e[9]=o=>u.value=o),title:"新增菜单",width:"500px"},{footer:t(()=>[l(p,{onClick:e[8]||(e[8]=o=>u.value=!1)},{default:t(()=>[...e[16]||(e[16]=[i("取消",-1)])]),_:1}),l(p,{type:"primary",loading:v.value,onClick:B},{default:t(()=>[...e[17]||(e[17]=[i("确定",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(F,{ref_key:"formRef",ref:V,model:n,rules:D,"label-width":"80px"},{default:t(()=>[l(d,{label:"菜单名称",prop:"title"},{default:t(()=>[l(m,{modelValue:n.title,"onUpdate:modelValue":e[1]||(e[1]=o=>n.title=o)},null,8,["modelValue"])]),_:1}),l(d,{label:"菜单类型"},{default:t(()=>[l(j,{modelValue:n.menu_type,"onUpdate:modelValue":e[2]||(e[2]=o=>n.menu_type=o)},{default:t(()=>[l(x,{value:1},{default:t(()=>[...e[14]||(e[14]=[i("目录",-1)])]),_:1}),l(x,{value:2},{default:t(()=>[...e[15]||(e[15]=[i("菜单",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"路由路径",prop:"path"},{default:t(()=>[l(m,{modelValue:n.path,"onUpdate:modelValue":e[3]||(e[3]=o=>n.path=o),placeholder:"/path"},null,8,["modelValue"])]),_:1}),l(d,{label:"组件路径",prop:"component"},{default:t(()=>[l(m,{modelValue:n.component,"onUpdate:modelValue":e[4]||(e[4]=o=>n.component=o),placeholder:"views/xxx/index"},null,8,["modelValue"])]),_:1}),l(d,{label:"图标",prop:"icon"},{default:t(()=>[l(m,{modelValue:n.icon,"onUpdate:modelValue":e[5]||(e[5]=o=>n.icon=o),placeholder:"Element Plus 图标名称"},null,8,["modelValue"])]),_:1}),l(d,{label:"权限标识",prop:"permission"},{default:t(()=>[l(m,{modelValue:n.permission,"onUpdate:modelValue":e[6]||(e[6]=o=>n.permission=o),placeholder:"system:user:list"},null,8,["modelValue"])]),_:1}),l(d,{label:"排序",prop:"sort"},{default:t(()=>[l(q,{modelValue:n.sort,"onUpdate:modelValue":e[7]||(e[7]=o=>n.sort=o),min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},ae=T(le,[["__scopeId","data-v-29e4231e"]]);export{ae as default};
